<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Hypothesis test</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Overview</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="data_exploration.html">Data Exploration</a>
</li>
<li>
  <a href="test_here.html">Data Analysis</a>
</li>
<li>
  <a href="https://zl2974.shinyapps.io/Risky_Coffee/">Map</a>
</li>
<li>
  <a href="data_source.html">Data source</a>
</li>
<li>
  <a href="Proposal.html">About</a>
</li>
<li>
  <a href="mailto:&lt;liuyuzhust@163.com&gt;">
    <span class="fa fa-envelope fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/zl2974/hot_coffee">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">

<div class="btn-group pull-right">
<button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Hypothesis test</h1>

</div>


<div id="load-data" class="section level1">
<h1>Load data</h1>
<div id="some-plotdescriptiontest-about-fine-amount" class="section level2">
<h2>Some plot/description/test about fine amount</h2>
<ol style="list-style-type: decimal">
<li>anova between fine amount and different boros</li>
</ol>
<p>From data exploration, we have notice that the violation code varies among boroughs as well as the fine amount. We see from the table that the mean of fine amount in Queen is different from the Manhattan by 10$, and thus, we propose hypothesis that there’s at least 1 pairs of boroughs’ fine amount is different from others.</p>
<table>
<caption>Fine Amount in borough</caption>
<thead>
<tr class="header">
<th align="left">borough</th>
<th align="right">mean</th>
<th align="right">standard_error</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Bronx</td>
<td align="right">64.9</td>
<td align="right">29.8</td>
</tr>
<tr class="even">
<td align="left">Brooklyn</td>
<td align="right">60.3</td>
<td align="right">25.6</td>
</tr>
<tr class="odd">
<td align="left">Manhattan</td>
<td align="right">75.5</td>
<td align="right">33.2</td>
</tr>
<tr class="even">
<td align="left">Queens</td>
<td align="right">58.1</td>
<td align="right">25.3</td>
</tr>
<tr class="odd">
<td align="left">Staten Island</td>
<td align="right">55.7</td>
<td align="right">18.1</td>
</tr>
</tbody>
</table>
<p>To do that, we perform ANOVA test for multiple groups comparison. With:</p>
<p><span class="math inline">\(H_0\)</span> : there’s no difference of fine amount means between boroughs</p>
<p><span class="math inline">\(H_1\)</span> : at least two fine amount means of boroughs are not equal</p>
<pre><code>##                      Df   Sum Sq  Mean Sq F value Pr(&gt;F)    
## factor(borough)       4 2.06e+08 51611732   64217 &lt;2e-16 ***
## Residuals       3837084 3.08e+09      804                   
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
<table>
<caption>Turkey Test at 99% confidence Level</caption>
<thead>
<tr class="header">
<th align="left"></th>
<th align="right">diff</th>
<th align="right">lwr</th>
<th align="right">upr</th>
<th align="right">p adj</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Brooklyn-Bronx</td>
<td align="right">-4.69</td>
<td align="right">-4.84</td>
<td align="right">-4.53</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">Manhattan-Bronx</td>
<td align="right">10.53</td>
<td align="right">10.38</td>
<td align="right">10.69</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">Queens-Bronx</td>
<td align="right">-6.81</td>
<td align="right">-6.97</td>
<td align="right">-6.65</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">Staten Island-Bronx</td>
<td align="right">-9.25</td>
<td align="right">-9.52</td>
<td align="right">-8.97</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">Manhattan-Brooklyn</td>
<td align="right">15.22</td>
<td align="right">15.10</td>
<td align="right">15.34</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">Queens-Brooklyn</td>
<td align="right">-2.12</td>
<td align="right">-2.25</td>
<td align="right">-1.99</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">Staten Island-Brooklyn</td>
<td align="right">-4.56</td>
<td align="right">-4.82</td>
<td align="right">-4.30</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">Queens-Manhattan</td>
<td align="right">-17.34</td>
<td align="right">-17.47</td>
<td align="right">-17.21</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">Staten Island-Manhattan</td>
<td align="right">-19.78</td>
<td align="right">-20.04</td>
<td align="right">-19.52</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">Staten Island-Queens</td>
<td align="right">-2.44</td>
<td align="right">-2.70</td>
<td align="right">-2.18</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
<p>As the ANOVA test result from above, we reject the Null at 99% confidence level and conclude that there’s at least one borough’s mean of fine amount is different from others.</p>
<p>To further investigate the difference between boroughs, we perform Tukey test for pairwise comparison. From the Tukey test result, we are 95% confident that the true mean difference of fine amount between Staten Island and Bronx is between -0.238 and 0.55. Since CI of other comparisons are not including “0”, we only failed to reject the null hypothesis for Staten Island and Bronx, and conclude that each two fine amount means of boroughs are not equal except for Staten Island and Bronx.</p>
</div>
<div id="hypothesis-test-for-violation-counts" class="section level2">
<h2>hypothesis test for violation counts</h2>
<ol style="list-style-type: decimal">
<li>Chi-Squared test between violation counts generated in each weekdays and different boroughs</li>
</ol>
<p>From data exploration, we have noticed that the violation counts proportions in different weekdays among each boroughs are different.Thus, we assume there is no homogeneity in tickets counts proportions in each weekdays among boroughs.</p>
<p>To verify that, we performed Chi-squared test for multiple groups comparison. With:</p>
<p><span class="math inline">\(H_0\)</span> : the tickets proportion in weekdays among boroughs are equal.</p>
<p><span class="math inline">\(H_1\)</span> : not all proportions are equal</p>
<table>
<caption>Test Result</caption>
<thead>
<tr class="header">
<th align="left"></th>
<th align="right">Monday</th>
<th align="right">Tuesday</th>
<th align="right">Wednesday</th>
<th align="right">Thursday</th>
<th align="right">Friday</th>
<th align="right">Saturday</th>
<th align="right">Sunday</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Bronx</td>
<td align="right">79797</td>
<td align="right">89051</td>
<td align="right">92629</td>
<td align="right">107096</td>
<td align="right">104752</td>
<td align="right">31940</td>
<td align="right">16103</td>
</tr>
<tr class="even">
<td align="left">Brooklyn</td>
<td align="right">170847</td>
<td align="right">193090</td>
<td align="right">191494</td>
<td align="right">219169</td>
<td align="right">210620</td>
<td align="right">47245</td>
<td align="right">25646</td>
</tr>
<tr class="odd">
<td align="left">Manhattan</td>
<td align="right">170481</td>
<td align="right">198730</td>
<td align="right">206668</td>
<td align="right">224689</td>
<td align="right">209426</td>
<td align="right">82708</td>
<td align="right">42276</td>
</tr>
<tr class="even">
<td align="left">Queens</td>
<td align="right">161214</td>
<td align="right">176049</td>
<td align="right">180327</td>
<td align="right">196510</td>
<td align="right">191255</td>
<td align="right">55102</td>
<td align="right">21066</td>
</tr>
<tr class="odd">
<td align="left">Staten Island</td>
<td align="right">25426</td>
<td align="right">26743</td>
<td align="right">26445</td>
<td align="right">28812</td>
<td align="right">28243</td>
<td align="right">3822</td>
<td align="right">2414</td>
</tr>
</tbody>
</table>
<pre><code>## 
##  Pearson&#39;s Chi-squared test
## 
## data:  chisq_boro_day
## X-squared = 19265, df = 24, p-value &lt;2e-16</code></pre>
<pre><code>## [1] 36.4</code></pre>
<p>According to above chi-square test result, We reject the null hypothesis and conclude that there’s at least one borough’s proportions of violation counts for week days is different from others at 0.05 significant level.</p>
<ol start="2" style="list-style-type: lower-alpha">
<li>test whether the the probability of falling in the each hour is the same for each borough:</li>
</ol>
<pre><code>##                  0    1    2    3    4    5     6     7      8      9    10
## Bronx         2486 2961 2024 1411  397 4486 30069 35930  53894  43535 39023
## Brooklyn      5043 7354 5110 3280 3029 9545 36070 60196  86961  92192 69547
## Manhattan     1885 1936 1879 1219  439 3122 30461 81140 120227 111009 95754
## Queens        1613 3003 2370 1622 1087 5116 40257 52238  88669  87140 72488
## Staten Island   77  390  299  251  166  222  4081  8207   8959   9520  9708
##                   11    12     13     14    15    16    17    18    19    20
## Bronx          45523 47359  37115  33861 27758 26352 20461 17085 14569 14036
## Brooklyn      100424 92636  83178  72601 68010 58030 51320 47028 34447 31108
## Manhattan      94580 88395 139639 104730 72589 55906 50986 27922 16064 15516
## Queens         83202 78897  82649  80634 61075 63510 52781 40226 28813 23368
## Staten Island   9346  9372  11510  12231 11563 10726  9880  8461  6714  4982
##                  21   22   23
## Bronx         14030 4069 2934
## Brooklyn      30899 5883 4220
## Manhattan     13817 3000 2763
## Queens        22832 4845 3088
## Staten Island  4342  516  382</code></pre>
<pre><code>## 
##  Pearson&#39;s Chi-squared test
## 
## data:  chisq_boro_hour
## X-squared = 1e+05, df = 92, p-value &lt;2e-16</code></pre>
<pre><code>## [1] 115</code></pre>
<p>According to above chi-square test result, We reject the null hypothesis and conclude that there’s at least one borough’s proportions of violation counts for 24 hours is different from others at 0.05 significant level.</p>
<p>Sine 526.14 million square feet of office space existed in Manhattan in 2020. Manhattan’s office space is located in 3,830 commercial buildings in the major markets of Midtown, Midtown South, Lower Manhattan and Uptown [<a href="https://www.statista.com/statistics/605882/size-of-office-area-manhattan-by-submarket/">Statistics</a>]. At any given time most of this office space is rented. Manhattan becomes the well deserved business center in NYC. Due to the unequal active status of commerce among boroughs and expensive costs of keeping a car in NYC, the active area of life and work for people who own a car concentrates upon Manhattan. This is one of reasonable explanations of chi-square test result. But this situation might be changed since the commercial areas tend to extend to other boroughs. Some data in the report shows that the Bronx office market and the Staten Island office market have seen increased investor interest over the past 10 years [<a href="https://www.metro-manhattan.com/blog/market-report-a-look-at-nyc-office-sales-activity-from-2010-to-2020/">click here to get more detailed information</a>].</p>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
